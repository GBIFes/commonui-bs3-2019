var $__build_47_js_47_settings_46_js__=function(){"use strict";var e={isDevel:!0,layoutUrl:"https://demo.gbif.es/",sentryUrl:"https://e8b7082a5d2f4d659690e56438f6015c@sentry.comunes.org/17"};return{get default(){return e}}}(),$__build_47_js_47_url_46_js__=function(){"use strict";var e,p,d,f,t,h,g,m,b,v,n,o,s,r,a,i,y,l,w,$,j,C;function x(){return w?l=l||"file://"+(process.platform.match(t)?"/":"")+$("fs").realpathSync("."):document.location.href}function u(e,t,n){var o,s,r;t=t||x(),w?o=$("url").parse(t):(o=document.createElement("a")).href=t;var i=function(e){var t={path:!0,query:!0,hash:!0};return e&&p.test(e)&&(t.protocol=!0,t.host=!0,d.test(e)&&(t.port=!0),f.test(e)&&(t.user=!0,t.pass=!0)),t}(t);for(s in r=t.match(f)||[],j)i[s]?e[s]=o[j[s]]||"":e[s]="";if(e.protocol=e.protocol.replace(h,""),e.query=e.query.replace(g,""),e.hash=S(e.hash.replace(m,"")),e.user=S(r[1]||""),e.pass=S(r[2]||""),e.port=C[e.protocol]==e.port||0==e.port?"":e.port,!i.protocol&&y.test(t.charAt(0))&&(e.path=t.split("?")[0].split("#")[0]),!i.protocol&&n){var a=new k(x().match(b)[0]),l=a.path.split("/"),u=e.path.split("/"),c=["protocol","user","pass","host","port"],_=c.length;for(l.pop(),s=0;s<_;s++)e[c[s]]=a[c[s]];for(;".."===u[0];)l.pop(),u.shift();e.path=("/"!==t.charAt(0)?l.join("/"):"")+"/"+u.join("/")}e.path=e.path.replace(v,"/"),e.paths(e.paths()),e.query=new q(e.query)}function c(e){return encodeURIComponent(e).replace(n,"%27")}function S(e){return(e=(e=(e=e.replace(a," ")).replace(o,function(e,t,n,o){var s=parseInt(t,16)-224,r=parseInt(n,16)-128;if(0==s&&r<32)return e;var i=(s<<12)+(r<<6)+(parseInt(o,16)-128);return 65535<i?e:String.fromCharCode(i)})).replace(s,function(e,t,n){var o=parseInt(t,16)-192;if(o<2)return e;var s=parseInt(n,16)-128;return String.fromCharCode((o<<6)+s)})).replace(r,function(e,t){return String.fromCharCode(parseInt(t,16))})}function q(e){for(var t=e.split("&"),n=0,o=t.length;n<o;n++){var s=t[n].split("="),r=decodeURIComponent(s[0].replace(a," "));if(r){var i=void 0!==s[1]?S(s[1]):null;void 0===this[r]?this[r]=i:(this[r]instanceof Array||(this[r]=[this[r]]),this[r].push(i))}}}function k(e,t){u(this,e,!t)}return e="undefined"!=typeof module&&module.exports?module:window,p=/^[a-z]+:/,d=/[-a-z0-9]+(\.[-a-z0-9])*:\d+/i,f=/\/\/(.*?)(?::(.*?))?@/,t=/^win/i,h=/:$/,g=/^\?/,m=/^#/,b=/(.*\/)/,v=/^\/{2,}/,n=/'/g,o=/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,s=/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,r=/%([0-7][0-9a-f])/gi,a=/\+/g,i=/^\w:$/,y=/[^/#?]/,w="undefined"==typeof window&&"undefined"!=typeof global&&"function"==typeof require,$=w?e.require:null,j={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},C={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},q.prototype.toString=function(){var e,t,n="",o=c;for(e in this){var s=this[e];if(!(s instanceof Function||null===s))if(s instanceof Array){var r=s.length;if(r)for(t=0;t<r;t++){var i=s[t];n+=n?"&":"",n+=o(e)+(null==i?"":"="+o(i))}else n+=(n?"&":"")+o(e)+"="}else n+=n?"&":"",n+=o(e)+(void 0===s?"":"="+o(s))}return n},k.prototype.clearQuery=function(){for(var e in this.query)this.query[e]instanceof Function||delete this.query[e];return this},k.prototype.queryLength=function(){var e=0;for(var t in this.query)this.query[t]instanceof Function||e++;return e},k.prototype.isEmptyQuery=function(){return 0===this.queryLength()},k.prototype.paths=function(e){var t,n="",o=0;if(e&&e.length&&e+""!==e){for(this.isAbsolute()&&(n="/"),t=e.length;o<t;o++)e[o]=!o&&i.test(e[o])?e[o]:c(e[o]);this.path=n+e.join("/")}for(o=0,t=(e=("/"===this.path.charAt(0)?this.path.slice(1):this.path).split("/")).length;o<t;o++)e[o]=S(e[o]);return e},k.prototype.encode=c,k.prototype.decode=S,k.prototype.isAbsolute=function(){return this.protocol||"/"===this.path.charAt(0)},k.prototype.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&c(this.user)+(this.pass&&":"+c(this.pass))+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+c(this.hash))},e[e.exports?"exports":"Url"]=k,{}}(),$__build_47_js_47_js_46_cookie_46_js__=function(){"use strict";return function(e){var t;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"===("undefined"==typeof exports?"undefined":$traceurRuntime.typeof(exports))&&(module.exports=e(),t=!0),!t){var n=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=n,o}}}(function(){function a(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}function u(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(l){function i(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=a({path:"/"},i.defaults,n)).expires&&(n.expires=new Date(1*new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var o=JSON.stringify(t);/^[\{\[]/.test(o)&&(t=o)}catch(e){}t=l.write?l.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var r in n)n[r]&&(s+="; "+r,!0!==n[r]&&(s+="="+n[r].split(";")[0]));return document.cookie=e+"="+t+s}}function t(e,t){if("undefined"!=typeof document){for(var n={},o=document.cookie?document.cookie.split("; "):[],s=0;s<o.length;s++){var r=o[s].split("="),i=r.slice(1).join("=");t||'"'!==i.charAt(0)||(i=i.slice(1,-1));try{var a=u(r[0]);if(i=(l.read||l)(i,a)||u(i),t)try{i=JSON.parse(i)}catch(e){}if(n[a]=i,e===a)break}catch(e){}}return e?n[e]:n}}return i.set=n,i.get=function(e){return t(e,!1)},i.getJSON=function(e){return t(e,!0)},i.remove=function(e,t){n(e,"",a(t,{expires:-1}))},i.defaults={},i.withConverter=e,i}(function(){})}),{}}(),$__build_47_js_47_i18n_95_init_46_js__=function(){"use strict";var e=$__build_47_js_47_settings_46_js__.default,t=window.gbiflocale,n=new Url,o=["es","en","ca"];if(void 0===t&&(e.isDevel&&console.log("init locale: "+t),e.isDevel&&console.log("i18n init in development!"),t=n.query.lang,e.isDevel&&console.log("Lang locale: "+t),void 0===t&&(t=Cookies.get("datos-gbif-es-lang")),e.isDevel&&console.log("Initial locale: "+t),null==t&&(t=navigator.language.substring(0,2)),-1<o.indexOf(t)||(t="es"),e.isDevel&&console.log("End locale: "+t),Cookies.set("datos-gbif-es-lang",t,{expires:365,path:"/"}),Cookies.set("datos-gbif-es-lang",t,{expires:365,path:"/",domain:".gbif.es"})),void 0===Cookies.get("datos-gbif-es-lang-session")&&void 0===n.query.lang){Cookies.set("datos-gbif-es-lang-session","/",{expires:1/48}),n.query.lang=t,document.location.search=n.query}return window.gbiflocale=t,Object.freeze(t),Object.freeze(o),{get locale(){return t},get enabledLangs(){return o}}}(),$__build_47_js_47_i18n_95_menus_46_js__=function(){"use strict";var l=$__build_47_js_47_settings_46_js__.default,e=$__build_47_js_47_i18n_95_init_46_js__,u=e.locale,c=e.enabledLangs;return window.i18n_menu_initialized=!1,$(function(){window.i18n_menu_initialized||(function(){console.log("Calling i18n_menus"),l.isDevel&&console.log("locale in i18n_menus: "+u),u&&$(".top-nav-menu a, .portal-link").each(function(){var e=$(this),t=e.attr("href"),n=t.split("#")[0],o=t.split("#")[1];void 0===o?e.attr("href",t+"?lang="+u):e.attr("href",n+"?lang="+u+"#"+o),l.isDevel&&console.log("Added lang to href: "+e.attr("href"))});for(var e=window.location.href,t=0;t<c.length;t++){var n=c[t],o=$("."+n+"-locale-link"),s=e;if(e.includes("lang="))s=e.replace(/lang=en|lang=es|lang=ca/gi,"lang="+n);else if(e.includes("?"))s=s+"&lang="+n;else{var r=e.split("#")[0],i=e.split("#")[1];s=r+"?lang="+n+(i=void 0===i?"":"#"+i)}o.attr("href",s),l.isDevel&&console.log("Added lang to href: "+o.attr("href"))}$(".wpml-ls-statics-shortcode_actions ul li").each(function(e){var t=$(this).text().replace(/^\s+|\s+$/gm,"").toLowerCase();$(this).removeClass("wpml-ls-current-language"),t===u&&$(this).addClass("wpml-ls-current-language")});var a=l.layoutUrl+"i18n/";l.isDevel&&console.log("localePath: "+a),jQuery.i18n.properties({name:"messages",path:a,mode:"both",language:u,async:!0,callback:function(){for(var e=["main_title_label","menu_portal_part1","menu_portal_part2","menu_collections","menu_datasets","menu_search","menu_explore","menu_regions","top_menu_dataportal","footer_menu_about","footer_menu_biodiversity_data","footer_menu_collaborations","footer_menu_resources","footer_menu_news","footer_menu_training","footer_menu_software","footer_menu_contact","numbers_occurrences_label","numbers_datasets_label","numbers_institutions_label","numbers_species_label","lang_link_en","lang_link_es","lang_link_cat","footer_legal_info","search_input_advanced1","search_input_advanced2","sub_menu_collections","sub_menu_collections_detail","sub_menu_datasets","sub_menu_datasets_detail","sub_menu_explore","sub_menu_explore_detail","sub_menu_regions","sub_menu_regions_detail","footer_legal_code","banner_search_input_placeholder","main_search_input_placeholder","auth_bar_login","auth_bar_logout","auth_bar_signup","auth_bar_myprofile","autocompleteHeader_placeholder"],t=0;t<e.length;t++)if(e[t].endsWith("_placeholder")){var n=e[t].substring(0,e[t].length-12);$("#"+n).attr("placeholder",jQuery.i18n.prop(e[t]))}else $("#"+e[t]).html(jQuery.i18n.prop(e[t]))}})}(),window.i18n_menu_initialized=!0)}),{}}(),$__build_47_js_47_top_45_search_46_js__=function(){"use strict";return document.addEventListener("DOMContentLoaded",function(){console.log("Enabling BIE search"),"datos.gbif.es"!==document.location.host&&($("#top-search-icon-button").show(),$("#top-search-icon-button-big").show(),$("#top-search-icon-button-small").show())}),{}}(),$__build_47_js_47_application_46_js__=function(){"use strict";var s;return s={},window.tmpl=function e(t,n){var o=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):s[t]=s[t]||e(document.getElementById(t).innerHTML);return n?o(n):o},window.BC_CONF=window.BC_CONF||{},jQuery(function(){var o=BC_CONF.autoCompleteSelector||"#autocompleteHeader",e=BC_CONF.appendToSelector||"#autocompleteSearchALA",n=BC_CONF.autocompleteURL||"https://especies-ws.gbif.es/search/auto.json",s=BC_CONF.templateId||"autoCompleteTemplate",t=$.ui&&$.ui.autocomplete;if("function"==typeof t){var r=t({appendTo:e,minLength:0,source:function(e,t){$.ajax({url:n,dataType:"json",data:{q:e.term},success:function(e){t(e.autoCompleteList)}})},focus:function(e,t){var n=$(this).data("ui-autocomplete").options.getMatchingName;return $(o).val(n(t.item)),!1},select:function(e,t){var n=$(this).data("ui-autocomplete").options.getMatchingName;return $(o).val(n(t.item)),!1},getMatchingName:function(e){return e.commonNameMatches&&e.commonNameMatches.length?e.commonName:e.name}},$(o));r._renderItem=function(e,t){return $(tmpl(s)(t)).appendTo(e)},r._resizeMenu=function(){this.menu.element.outerWidth(this.element.outerWidth())}}}),window.focusOnClickSearchButton=function(){setTimeout(function(){document.getElementById("autocompleteHeader").focus()},0)},{}}(),$__build_47_js_47_collectory_46_js__=function(){"use strict";return document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){/^colecciones.gbif.es/.test(window.location.host)&&0===$("#logs-since-2018").length&&(console.log("Adding downloads label to collectory"),$("#usage-stats>#usage").after('<div id="logs-since-2018"><label style="font-weight: normal; font-size: 12px;">* Las estad&iacute;sticas de uso comenzaron a registrarse el 1 de noviembre de 2018.</label></div>'))},4e3)}),{}}(),$__build_47_js_47_sentry_46_js__=function(){"use strict";var e=$__build_47_js_47_settings_46_js__.default;return e.isDevel||(Sentry.init({dsn:e.sentryUrl}),window.onload=function(){$(document).ready(function(){$(document).ajaxError(function(e,t,n,o){Raven.captureMessage(o||t.statusText,{extra:{type:n.type,url:n.url,data:n.data,status:t.status,error:o||t.statusText,response:t.responseText.substring(0,100)}})})})}),{}}(),$__build_47_js_47_stats_46_js__=function(){"use strict";var i=$__build_47_js_47_i18n_95_init_46_js__.locale;function t(e){for(var t="en"===i?",":".",n=(e+="").split("."),o=n[0],s=1<n.length?"."+n[1]:"",r=/(\d+)(\d{3})/;r.test(o);)o=o.replace(r,"$1"+t+"$2");return o+s}return document.addEventListener("DOMContentLoaded",function(){$.getJSON("https://registros-ws.gbif.es/occurrences/search?pageSize=0",function(e){$("#number_registros").html(t(e.totalRecords)).addClass("loaded_stats")}),$.getJSON("https://colecciones.gbif.es/ws/institution",function(e){$("#number_instituciones").html(e.length).addClass("loaded_stats")}),$.getJSON("https://colecciones.gbif.es/ws/dataResource",function(e){$("#number_bases").html(e.length).addClass("loaded_stats")}),$.getJSON("https://registros-ws.gbif.es/occurrence/facets?q=*:*&facets=species&pageSize=0",function(e){$("#number_species").html(t(e[0].count)).addClass("loaded_stats")})}),{}}(),$__build_47_js_47_init_46_js__=function(){"use strict";return{}}();