"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function($){$.i18n={},$.i18n.map={};var debug=function(e){console.log("i18n::".concat(e))};function callbackIfComplete(e){e.debug&&(debug("callbackIfComplete()"),debug("totalFiles: ".concat(e.totalFiles)),debug("filesLoaded: ".concat(e.filesLoaded))),e.async&&e.filesLoaded===e.totalFiles&&e.callback&&e.callback()}function loadAndParseFiles(e,a){a.debug&&debug("loadAndParseFiles"),null!==e&&0<e.length?loadAndParseFile(e[0],a,function(){e.shift(),loadAndParseFiles(e,a)}):callbackIfComplete(a)}function loadAndParseFile(t,s,r){s.debug&&(debug("loadAndParseFile('".concat(t,"')")),debug("totalFiles: ".concat(s.totalFiles)),debug("filesLoaded: ".concat(s.filesLoaded))),null!=t&&$.ajax({url:t,async:s.async,cache:s.cache,dataType:"text",success:function(e,a){s.debug&&(debug("Succeeded in downloading ".concat(t,".")),debug(e)),parseData(e,s),r()},error:function(e,a,n){s.debug&&debug("Failed to download or parse ".concat(t,". errorThrown: ").concat(n)),404===e.status&&(s.totalFiles-=1),r()}})}function parseData(data,settings){for(var parsed="",lines=data.split(/\n/),regPlaceHolder=/(\{\d+})/g,regRepPlaceHolder=/\{(\d+)}/g,unicodeRE=/(\\u.{4})/gi,i=0,j=lines.length;i<j;i++){var line=lines[i];if(line=line.trim(),0<line.length&&"#"!=line.match("^#")){var pair=line.split("=");if(0<pair.length){for(var name=decodeURI(pair[0]).trim(),value=1==pair.length?"":pair[1];-1!=value.search(/\\$/);)value=value.substring(0,value.length-1),value+=lines[++i].trimRight();for(var s=2;s<pair.length;s++)value+="=".concat(pair[s]);if(value=value.trim(),"map"==settings.mode||"both"==settings.mode){var unicodeMatches=value.match(unicodeRE);unicodeMatches&&unicodeMatches.forEach(function(e){value=value.replace(e,unescapeUnicode(e))}),settings.namespace?$.i18n.map[settings.namespace][name]=value:$.i18n.map[name]=value}if("vars"==settings.mode||"both"==settings.mode)if(value=value.replace(/"/g,'\\"'),checkKeyNamespace(name),regPlaceHolder.test(value)){var parts=value.split(regPlaceHolder),first=!0,fnArgs="",usedArgs=[];parts.forEach(function(e){!regPlaceHolder.test(e)||0!==usedArgs.length&&-1!=usedArgs.indexOf(e)||(first||(fnArgs+=","),fnArgs+=e.replace(regRepPlaceHolder,"v$1"),usedArgs.push(e),first=!1)}),parsed+="".concat(name,"=function(").concat(fnArgs,"){");var fnExpr='"'.concat(value.replace(regRepPlaceHolder,'"+v$1+"'),'"');parsed+="return ".concat(fnExpr,";")+"};"}else parsed+="".concat(name,'="').concat(value,'";')}}}eval(parsed),settings.filesLoaded+=1}function checkKeyNamespace(key){var regDot=/\./;if(regDot.test(key))for(var fullname="",names=key.split(/\./),i=0,j=names.length;i<j;i++){var name=names[i];0<i&&(fullname+="."),fullname+=name,eval("typeof ".concat(fullname,' == "undefined"'))&&eval("".concat(fullname,"={};"))}}function unescapeUnicode(e){var a=[],n=parseInt(e.substr(2),16);return 0<=n&&n<Math.pow(2,16)&&a.push(n),a.reduce(function(e,a){return e+String.fromCharCode(a)},"")}$.i18n.properties=function(l){(l=$.extend({name:"Messages",language:"",path:"",namespace:null,mode:"vars",cache:!1,debug:!1,encoding:"UTF-8",async:!1,callback:null},l)).namespace&&"string"==typeof l.namespace&&(l.namespace.match(/^[a-z]*$/)?$.i18n.map[l.namespace]={}:(debug("Namespaces can only be lower case letters, a - z"),l.namespace=null)),l.path.match(/\/$/)||(l.path+="/"),l.language=this.normaliseLanguageCode(l);var e=l.name&&l.name.constructor===Array?l.name:[l.name];l.totalFiles=2*e.length+(5<=l.language.length?e.length:0),l.debug&&debug("totalFiles: ".concat(l.totalFiles)),l.filesLoaded=0,e.forEach(function(e){var a,n,t;a="".concat(l.path+e,".properties");var s=l.language.substring(0,2);if(n="".concat(l.path+e,"_").concat(s,".properties"),5<=l.language.length){var r=l.language.substring(0,5);t=[a,n,"".concat(l.path+e,"_").concat(r,".properties")]}else t=[a,n];loadAndParseFiles(t,l)}),l.callback&&!l.async&&l.callback()},$.i18n.prop=function(e){var a,n,t=[].slice.call(arguments);if(2==t.length)if($.isArray(t[1]))a=t[1];else if("object"===_typeof(t[1])){n=t[1].namespace;var s=t[1].replacements;t.splice(-1,1),s&&Array.prototype.push.apply(t,s)}var r,l=n?$.i18n.map[n][e]:$.i18n.map[e];if(null===l)return"[".concat(n?"".concat(n,"#").concat(e):e,"]");if("string"==typeof l){for(r=0;-1!=(r=l.indexOf("\\",r));)l="t"==l.charAt(r+1)?"".concat(l.substring(0,r),"\t").concat(l.substring(2+r++)):"r"==l.charAt(r+1)?"".concat(l.substring(0,r),"\r").concat(l.substring(2+r++)):"n"==l.charAt(r+1)?"".concat(l.substring(0,r),"\n").concat(l.substring(2+r++)):"f"==l.charAt(r+1)?"".concat(l.substring(0,r),"\f").concat(l.substring(2+r++)):"\\"==l.charAt(r+1)?"".concat(l.substring(0,r),"\\").concat(l.substring(2+r++)):l.substring(0,r)+l.substring(r+1);var c,i,o=[];for(r=0;r<l.length;)if("'"==l.charAt(r))if(r==l.length-1)l=l.substring(0,r);else if("'"==l.charAt(r+1))l=l.substring(0,r)+l.substring(++r);else{for(c=r+2;-1!=(c=l.indexOf("'",c));){if(c==l.length-1||"'"!=l.charAt(c+1)){l=l.substring(0,r)+l.substring(r+1,c)+l.substring(c+1),r=c-1;break}l=l.substring(0,c)+l.substring(++c)}-1==c&&(l=l.substring(0,r)+l.substring(r+1))}else if("{"==l.charAt(r))if(-1==(c=l.indexOf("}",r+1)))r++;else if(i=parseInt(l.substring(r+1,c)),!isNaN(i)&&0<=i){var u=l.substring(0,r);""!==u&&o.push(u),o.push(i),r=0,l=l.substring(c+1)}else r=c+1;else r++;""!==l&&o.push(l),l=o,n?$.i18n.map[settings.namespace][e]=o:$.i18n.map[e]=o}if(l&&0===l.length)return"";if(l&&1==l.length&&"string"==typeof l[0])return l[0];l||gbifesjs.isDevel&&console.log("missing i18n key: ".concat(e));var g="",p=0;for(l&&(p=l.length),r=0,c=p;r<c;r++)"string"==typeof l[r]?g+=l[r]:a&&l[r]<a.length?g+=a[l[r]]:!a&&l[r]+1<t.length?g+=t[l[r]+1]:g+="{".concat(l[r],"}");return g},$.i18n.normaliseLanguageCode=function(e){var a=e.language;return(!a||a.length<2)&&(e.debug&&debug("No language supplied. Pulling it from the browser ..."),a=navigator.languages&&0<navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage||"en",e.debug&&debug("Language from browser: ".concat(a))),3<(a=(a=a.toLowerCase()).replace(/-/,"_")).length&&(a=a.substring(0,3)+a.substring(3).toUpperCase()),a}}(jQuery);